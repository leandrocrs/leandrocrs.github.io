{
    "componentChunkName": "component---src-pages-blog-markdown-remark-frontmatter-slug-tsx",
    "path": "/blog/speedup-wsl-by-disabling-windows-real-time-protection/",
    "result": {"data":{"markdownRemark":{"html":"<p>In this short tutorial, I will help you speedup Windows Subsystem for Linux (WSL) by disabling Windows Real-time protection.</p>\n<p>While being helpful detecting some common Windows malwares, in GNU/Linux side it’s so inefficient and actually unhelpful.</p>\n<p>Every time you try to access/read/write some file/folder, Windows Defender intercept WSL requisition for antivirus scanning, slowing down things until you hate everything in WSL!</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7de272fd89dd13c37d768152cac81329/d9199/1-6FyyUhdUkfW77MDfC1BgUA.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABX0lEQVQoz21RiXKCMBDFelsVlMPrC6pW8CAJOSBAAvr/P9TZUJnadubNzs4k7+2+fZabKJcqj+mAa4+qdVr7XLtU+VwvSWnj3Mb5+CJ6YdI5YuuAXuBRZaBXvPKZWovaZ9oHrQp6rleispGcI/kP2aXKTUqfwSePqV12D0TlM70W1UrUAa+22X0lapDA0trHL+R21DIpl0k5R3J05sMzG184NBFr6iCi/ZD+nrzNHpu03mWPBSner2n3k1gfN3jYxz+ADOI/ns3Cm/Q+Q3JyFeOL6Ie0QfeUDEI6iFjvlHwzW7mGvCRg2BymdnDeeBtGbHwRBmDBGIHlW3SOhuwzSMhjquXP4bZQF6SY3tLOEXcOCOqzeWvP7lHl0vIZj/YYZA69qAIITzukgKhiaWNpo3xyS2dxNogYSDQ5m6hqj6mAV3MkHZwvSGFQOrhwSD6LM4fk01s2OnOH5KMzn1zFF73rYrEpb65wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ubuntu running inside WSL trying to update some packages behind Windows Real-time protection bad guy\"\n        title=\"Ubuntu running inside WSL trying to update some packages behind Windows Real-time protection bad guy\"\n        src=\"/static/7de272fd89dd13c37d768152cac81329/fcda8/1-6FyyUhdUkfW77MDfC1BgUA.png\"\n        srcset=\"/static/7de272fd89dd13c37d768152cac81329/12f09/1-6FyyUhdUkfW77MDfC1BgUA.png 148w,\n/static/7de272fd89dd13c37d768152cac81329/e4a3f/1-6FyyUhdUkfW77MDfC1BgUA.png 295w,\n/static/7de272fd89dd13c37d768152cac81329/fcda8/1-6FyyUhdUkfW77MDfC1BgUA.png 590w,\n/static/7de272fd89dd13c37d768152cac81329/efc66/1-6FyyUhdUkfW77MDfC1BgUA.png 885w,\n/static/7de272fd89dd13c37d768152cac81329/d9199/1-6FyyUhdUkfW77MDfC1BgUA.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Ubuntu running inside WSL trying to update some packages behind Windows Real-time protection bad guy</figcaption>\n  </figure></p>\n<p><strong>*Warning</strong>: disabling Real-time Security may have some direct impact in yours personal security*. Know what you are doing.</p>\n<h1>Adding WSL in the Windows Security's Exclusion List</h1>\n<p>So, first get the UbuntuOnLinux (or your distro of choice) installation path going to <code class=\"language-text\">%USERPROFILE%\\AppData\\Local\\Packages</code> and lookup for something like <code class=\"language-text\">CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc</code>.</p>\n<p>Copy the entire path from <em>Explorer.exe</em> address bar, then go to:</p>\n<p>Settings > Update &#x26; Security > Windows Defender > Open Windows Defender Secutiry Central > Protection Against Viruses &#x26; Threats > Advanced Config… > Exclusions > Add or Remove > Add > Folder and finally: paste the previous copied path.</p>\n<h1>High security sometimes means Low performance</h1>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9f1e9d48b1c19b0dc2270639aff56367/ac42d/1-Cb8wWHPg6h_bgN8P7cnULg.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.94594594594595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7khk2FbiVC//xAAYEAACAwAAAAAAAAAAAAAAAAABEAIRQv/aAAgBAQABBQJTJt6X/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhAAAwAAAAAAAAAAAAAAAAAAADAx/9oACAEBAAY/Aio//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERECFRQf/aAAgBAQABPyFzswQSPwcu2a6MW4fCIZ//2gAMAwEAAgADAAAAENAA/P/EABURAQEAAAAAAAAAAAAAAAAAABAB/9oACAEDAQE/ECH/xAAVEQEBAAAAAAAAAAAAAAAAAAAQAf/aAAgBAgEBPxAp/8QAHBAAAgMAAwEAAAAAAAAAAAAAAREAIVExccHh/9oACAEBAAE/ELAwpkRXzAMdY7MQGGQOH4nMLITUEATY7iOAJU1P/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of Windows Defender Security Center showing Real-time protection as disabled\"\n        title=\"Screenshot of Windows Defender Security Center showing Real-time protection as disabled\"\n        src=\"/static/9f1e9d48b1c19b0dc2270639aff56367/1c72d/1-Cb8wWHPg6h_bgN8P7cnULg.jpg\"\n        srcset=\"/static/9f1e9d48b1c19b0dc2270639aff56367/a80bd/1-Cb8wWHPg6h_bgN8P7cnULg.jpg 148w,\n/static/9f1e9d48b1c19b0dc2270639aff56367/1c91a/1-Cb8wWHPg6h_bgN8P7cnULg.jpg 295w,\n/static/9f1e9d48b1c19b0dc2270639aff56367/1c72d/1-Cb8wWHPg6h_bgN8P7cnULg.jpg 590w,\n/static/9f1e9d48b1c19b0dc2270639aff56367/ac42d/1-Cb8wWHPg6h_bgN8P7cnULg.jpg 618w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of Windows Defender Security Center showing Real-time protection as disabled</figcaption>\n  </figure></p>\n<p>Adding WSL to exclusion list may speedup things a little bit, but not so. There is one more thing bringing your performance down: Window Defender real-time protection.</p>\n<p>As noticed by <a href=\"https://github.com/tanseydavid\">David Tansey</a> in this <a href=\"https://github.com/Microsoft/WSL/issues/1932\">WSL issue</a>, real-time protection have a HUGE impact in developer tools like Visual Studio build tool and tools like Kubernetes and etc., including WSL.</p>\n<p>We will disable it, but be aware: you will may be more vulnerable for some common attacks through malicious script execution.</p>\n<p>So, let’s disable:</p>\n<h2>Using Group Policy (gpedit.exe) to disable real-time protection:</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd6e3998e77714458e7c12fdf3a34d80/5a190/1-a-U4iD2KwHC3VXFuNDhTxg.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQoz5WQ3Y6bMBCFef83WTVNNgnZVqoqVb2puqrUrsLG/CyODcYxYDCGAAmOcUVy0VZVq/bTuRjNzJkZjXU3X9zNV6/uVwt7M19tZkt7ttzM1w9L++F+vbnKnmRP8S05W9qvV1OPJUsaxcmxaYwZfUQet/CbF3mkcGLppR04XEWPTlztaPuExZbUrOrL5lTUJ+tYHcLA5UXR9x2KYspldxpeEr74FLz5ihef4Vsnf+8W60f4ER7f7bIPL3XVa2PMaIw19ALtva4/X5TCCGUpqyqRpykKfRwGOPQTBMucEQzHUbdNrbUejRnHSVbf5NunL7wolVIYY9/3CSHswIDrAc93/QB4fhTFIdwP6lJJqS7T2hvWqS3DAERRLISAEAIAKKW1rAlJCKExSRJKOS/YgWmtu7bV+iezyPaO4wAAOOcIIc/zCCFKqal4O+7PWJJHz8+7sizPwxlCGAQBpXT8q+eHucwxAG6W5UVRIITyPBdCTF/5jespvwy1DpHLWDoM57Ztu64z/4MFQ5eladf3ddNk6YSUsvk3vgNvd1pZMg3FJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of Group Policy Editor (a.k.a. gpedit.msc)\"\n        title=\"Screenshot of Group Policy Editor (a.k.a. gpedit.msc)\"\n        src=\"/static/cd6e3998e77714458e7c12fdf3a34d80/fcda8/1-a-U4iD2KwHC3VXFuNDhTxg.png\"\n        srcset=\"/static/cd6e3998e77714458e7c12fdf3a34d80/12f09/1-a-U4iD2KwHC3VXFuNDhTxg.png 148w,\n/static/cd6e3998e77714458e7c12fdf3a34d80/e4a3f/1-a-U4iD2KwHC3VXFuNDhTxg.png 295w,\n/static/cd6e3998e77714458e7c12fdf3a34d80/fcda8/1-a-U4iD2KwHC3VXFuNDhTxg.png 590w,\n/static/cd6e3998e77714458e7c12fdf3a34d80/5a190/1-a-U4iD2KwHC3VXFuNDhTxg.png 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of Group Policy Editor (a.k.a. gpedit.msc)</figcaption>\n  </figure></p>\n<ol>\n<li>On your Group Policy management machine, open the Group Policy Management Console, right-click the Group Policy Object you want to configure and click Edit.</li>\n<li>In the Group Policy Management Editor go to Computer configuration.</li>\n<li>Click Policies then Administrative templates.</li>\n<li>Expand the tree to Windows components > Windows Defender Antivirus > Real-time protection.</li>\n<li>Double-click the Turn off real-time protection setting and set the option to Enabled. Click OK.</li>\n</ol>\n<p>I’ve only tested superficially, but I can ensure a great performance speed up.</p>\n<h1>References:</h1>\n<p>Configure always-on real-time protection in Windows Defender AV | Microsoft Docs  —  <a href=\"https://docs.microsoft.com/en-us/windows/threat-protection/windows-defender-antivirus/configure-real-time-protection-windows-defender-antivirus\">https://docs.microsoft.com/en-us/windows/threat-protection/windows-defender-antivirus/configure-real-time-protection-windows-defender-antivirus</a></p>\n<p>First posted on Medium <a href=\"https://medium.com/@leandrw/speeding-up-wsl-i-o-up-than-5x-fast-saving-a-lot-of-battery-life-cpu-usage-c3537dd03c74\">Speeding up WSL I/O up than 5x fast + saving a lot of battery life &#x26; CPU usage</a>, as a reply to <a href=\"https://medium.com/@johnwoodruff91/epic-dev-environment-with-wsl-dc81e234ae61\">Epic Development Environment using Windows Subsystem for Linux</a></p>","frontmatter":{"date":"August 30, 2018","lang":"en","slug":"/speedup-wsl-by-disabling-windows-real-time-protection/","title":"Speedup WSL by disabling Windows Real-time protection"}}},"pageContext":{"id":"93b95d59-a4e6-56ff-a8da-0ac999f3e34a","frontmatter__slug":"/speedup-wsl-by-disabling-windows-real-time-protection/","__params":{"frontmatter__slug":"speedup-wsl-by-disabling-windows-real-time-protection"}}},
    "staticQueryHashes": []}